name: Daily Task

on:
  schedule:
    # æ¯å¤© UTC 02:00 æ‰§è¡Œï¼ˆåŒ—äº¬æ—¶é—´ 10:00ï¼‰
    - cron: '0 2 * * *'
  
  # å…è®¸æ‰‹åŠ¨è§¦å‘
  workflow_dispatch:
    inputs:
      reason:
        description: 'æ‰‹åŠ¨è§¦å‘åŽŸå› '
        required: false
        default: 'æ‰‹åŠ¨æµ‹è¯•'

jobs:
  daily-job:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Display trigger info
        run: |
          echo "=========================================="
          echo "ðŸ• æ‰§è¡Œæ—¶é—´: $(TZ='Asia/Shanghai' date '+%Y-%m-%d %H:%M:%S') (åŒ—äº¬æ—¶é—´)"
          echo "ðŸ”§ è§¦å‘æ–¹å¼: ${{ github.event_name }}"
          if [ "${{ github.event_name }}" = "workflow_dispatch" ]; then
            echo "ðŸ“ è§¦å‘åŽŸå› : ${{ github.event.inputs.reason }}"
          fi
          echo "=========================================="
      
      - name: Run daily task
        run: |
          echo "å¼€å§‹æ‰§è¡Œæ¯æ—¥ä»»åŠ¡..."
          
          # åœ¨è¿™é‡Œæ·»åŠ ä½ çš„ä»»åŠ¡é€»è¾‘
          # ç¤ºä¾‹ï¼šè¿è¡Œè„šæœ¬
          # bash scripts/example.sh
          
          # ç¤ºä¾‹ï¼šè°ƒç”¨ API
          # curl -X POST https://api.example.com/webhook
          
          # ç¤ºä¾‹ï¼šå‘é€é€šçŸ¥
          # curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
          #   -d "chat_id=${{ secrets.TELEGRAM_CHAT_ID }}" \
          #   -d "text=æ¯æ—¥ä»»åŠ¡æ‰§è¡Œå®Œæˆ"
          
          echo "æ¯æ—¥ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼"
      
      - name: Summary
        run: |
          echo "### âœ… ä»»åŠ¡æ‰§è¡ŒæˆåŠŸ" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "- **æ‰§è¡Œæ—¶é—´**: $(TZ='Asia/Shanghai' date '+%Y-%m-%d %H:%M:%S') (åŒ—äº¬æ—¶é—´)" >> $GITHUB_STEP_SUMMARY
          echo "- **è§¦å‘æ–¹å¼**: ${{ github.event_name }}" >> $GITHUB_STEP_SUMMARY
